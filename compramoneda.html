
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Compra de Moneda Extranjera</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    h2 {
      text-align: center;
      text-decoration: underline;
    }

    form {
      width: 60%;
      margin: 0 auto;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
    }

    button {
      margin-top: 15px;
      padding: 10px 15px;
      background-color: #1e90ff;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #0066cc;
    }
  </style>
</head>
<body onload="cargarListas()">

  <h2>COMPRA DE MONEDA EXTRANJERA</h2>

  <form id="formCompra">
    <label for="tipoDoc">Tipo de Documento:</label>
    <select id="tipoDoc" required></select>

    <label for="numDoc">Número de Documento:</label>
    <input type="text" id="numDoc" required>

    <label for="nombreCliente">Nombre del Cliente:</label>
    <input type="text" id="nombreCliente" readonly>

    <label for="monedaComprar">Moneda a Comprar:</label>
    <select id="monedaComprar" required></select>

    <label for="tasaCompra">Tasa de Compra:</label>
    <input type="text" id="tasaCompra" readonly>

    <label for="cantidadComprar">Cantidad a Comprar:</label>
    <input type="number" id="cantidadComprar" min="1" required>

    <label for="valorPagar">Valor a Pagar:</label>
    <input type="text" id="valorPagar" readonly>

    <label for="fecha">Fecha:</label>
    <input type="text" id="fecha" readonly>

    <label for="hora">Hora:</label>
    <input type="text" id="hora" readonly>

    <button type="submit">Guardar Transacción</button>
  </form>

  <script>
    function cargarListas() {
      const tipoDoc = document.getElementById("tipoDoc");
      const tipos = ["Cédula", "Pasaporte", "Cédula de extranjería"];
      tipos.forEach(tipo => {
        let option = document.createElement("option");
        option.text = tipo;
        option.value = tipo.toLowerCase();
        tipoDoc.add(option);
      });

      const monedaComprar = document.getElementById("monedaComprar");
      const monedas = ["Dólar", "Euro"];
      monedas.forEach(moneda => {
        let option = document.createElement("option");
        option.text = moneda;
        option.value = moneda.toLowerCase();
        monedaComprar.add(option);
      });

      const now = new Date();
      document.getElementById("fecha").value = now.toLocaleDateString();
      document.getElementById("hora").value = now.toLocaleTimeString();

      monedaComprar.addEventListener("change", actualizarTasa);
      document.getElementById("cantidadComprar").addEventListener("input", calcularValorPagar);

      document.getElementById("numDoc").addEventListener("blur", function () {
        const num = this.value.trim();
        document.getElementById("nombreCliente").value = num ? "Cliente #" + num : "";
      });

      document.getElementById("formCompra").addEventListener("submit", function (e) {
        e.preventDefault();
        if (validarFormulario()) {
          alert("¡Transacción guardada exitosamente!");
          this.reset();
          cargarListas();
        }
      });
    }

    function actualizarTasa() {
      const moneda = document.getElementById("monedaComprar").value;
      const tasaCompra = document.getElementById("tasaCompra");

      if (moneda === "dólar") {
        tasaCompra.value = "3800";
      } else if (moneda === "euro") {
        tasaCompra.value = "4300";
      } else {
        tasaCompra.value = "";
      }

      calcularValorPagar();
    }

    function calcularValorPagar() {
      const tasa = parseFloat(document.getElementById("tasaCompra").value);
      const cantidad = parseFloat(document.getElementById("cantidadComprar").value);
      const valorPagar = document.getElementById("valorPagar");

      if (!isNaN(tasa) && !isNaN(cantidad)) {
        valorPagar.value = "$" + (tasa * cantidad).toLocaleString("es-CO");
      } else {
        valorPagar.value = "";
      }
    }

    function validarFormulario() {
      const campos = ["tipoDoc", "numDoc", "nombreCliente", "monedaComprar", "tasaCompra", "cantidadComprar"];
      for (let id of campos) {
        const campo = document.getElementById(id);
        if (!campo.value.trim()) {
          alert("Debe completar el campo: " + id);
          campo.focus();
          return false;
        }
      }
      return true;
    }
  </script>

</body>
</html>
