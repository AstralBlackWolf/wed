<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Compra de Moneda Extranjera</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 40px 20px;
      background-color: #f0f2f5;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }

    .card-form {
      background-color: #fff;
      border-radius: 12px;
      max-width: 500px;
      margin: 0 auto;
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
      color: #444;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1em;
    }

    input[readonly] {
      background-color: #f9f9f9;
    }

    button {
      margin-top: 25px;
      width: 100%;
      padding: 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s ease-in-out;
    }

    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <h2>Compra de Moneda Extranjera</h2>

  <div class="card-form">
    <form id="formCompra">
      <label for="tipoDoc">Tipo de Documento:</label>
      <select id="tipoDoc" required></select>

      <label for="numDoc">Número de Documento:</label>
      <input type="text" id="numDoc" required />

      <label for="nombreCliente">Nombre del Cliente:</label>
      <input type="text" id="nombreCliente" readonly />

      <label for="monedaComprar">Moneda a Comprar:</label>
      <select id="monedaComprar" required></select>

      <label for="tasaCompra">Tasa de Compra:</label>
      <input type="text" id="tasaCompra" readonly />

      <label for="cantidadComprar">Cantidad a Comprar:</label>
      <input type="number" id="cantidadComprar" min="1" required />

      <label for="valorPagar">Valor a Pagar:</label>
      <input type="text" id="valorPagar" readonly />

      <label for="fecha">Fecha:</label>
      <input type="text" id="fecha" readonly />

      <label for="hora">Hora:</label>
      <input type="text" id="hora" readonly />

      <button type="submit">Guardar Transacción</button>
    </form>
  </div>

  <script>
    const tiposDocumento = ["Cédula", "Pasaporte", "Cédula de extranjería"];
    const monedas = {
      "Dólar": 3800,
      "Euro": 4300,
      "Libra Esterlina": 4950,
    };

    function llenarSelect(id, datos) {
      const select = document.getElementById(id);
      select.innerHTML = "<option value=''>-- Seleccione --</option>";
      if (Array.isArray(datos)) {
        datos.forEach(op => {
          select.innerHTML += `<option value="${op}">${op}</option>`;
        });
      } else {
        Object.keys(datos).forEach(mon => {
          select.innerHTML += `<option value="${mon}">${mon}</option>`;
        });
      }
    }

    function actualizarFechaHora() {
      const now = new Date();
      document.getElementById("fecha").value = now.toLocaleDateString();
      document.getElementById("hora").value = now.toLocaleTimeString();
    }

    function actualizarTasa() {
      const moneda = document.getElementById("monedaComprar").value;
      document.getElementById("tasaCompra").value = monedas[moneda] || "";
      calcularValorPagar();
    }

    function calcularValorPagar() {
      const tasa = parseFloat(document.getElementById("tasaCompra").value);
      const cantidad = parseFloat(document.getElementById("cantidadComprar").value);
      const valor = !isNaN(tasa) && !isNaN(cantidad) ? (tasa * cantidad) : 0;
      document.getElementById("valorPagar").value = valor ? "$" + valor.toLocaleString("es-CO") : "";
    }

    function validarFormulario() {
      const campos = ["tipoDoc", "numDoc", "monedaComprar", "tasaCompra", "cantidadComprar"];
      for (let id of campos) {
        const campo = document.getElementById(id);
        if (!campo.value.trim()) {
          alert("Debe completar el campo: " + id);
          campo.focus();
          return false;
        }
      }
      return true;
    }

    window.onload = () => {
      llenarSelect("tipoDoc", tiposDocumento);
      llenarSelect("monedaComprar", monedas);
      actualizarFechaHora();
      setInterval(actualizarFechaHora, 1000);

      document.getElementById("monedaComprar").addEventListener("change", actualizarTasa);
      document.getElementById("cantidadComprar").addEventListener("input", calcularValorPagar);

      document.getElementById("numDoc").addEventListener("blur", () => {
        const num = document.getElementById("numDoc").value.trim();
        document.getElementById("nombreCliente").value = num ? "Cliente #" + num : "";
      });

      document.getElementById("formCompra").addEventListener("submit", e => {
        e.preventDefault();
        if (validarFormulario()) {
          alert("¡Transacción guardada exitosamente!");
          e.target.reset();
          actualizarFechaHora();
        }
      });
    };
  </script>

</body>
</html>
